import os.path
import mysql.connector 
import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText
from apscheduler.scheduler import Scheduler
import schedule
import time
import hashlib
import sys
from subprocess import Popen, PIPE
import database
import email_alert
import check_fileExistence


    
#track_file = int(raw_input("do you want to to track a file? Yes = 1, No = 0"))
#if(track_file == 1):
#    path_name = raw_input("Please enter the absolute pathname of the file")
#    db = database.initialise_db()
#    database.track_file_initialisation(path_name, db);

#INSERT = int(raw_input("do you want to insert into the database? Yes = 1, No = 0 ")) 
#if(INSERT == 1): 
 #    SQL_INSERT (raw_input("please enter in the sql INSERT command"))
 #    insert_db()

#-scheduler = Scheduler()
#-scheduler.daemonic = False
#-scheduler.start()
def last_accessed():
    with open("tracked_file.txt") as file:
        for line in file:
            line = line.strip()
            sys.stdout.write(time.ctime(os.stat(line).st_atime)) 
            sys.stdout.flush()
        

#everytime the file is accessed, write this to the corresponding stat
#file, calculate the average and compare to the other average access per day 
#file.

check_fileExistence.check_file_existence()
db = database.initialise_db()
database.track_file_initialisation("/etc/passwd", db)
#scheduler.add_cron_job(last_accessed, hour=1)

